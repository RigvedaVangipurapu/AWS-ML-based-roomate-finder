{"ast":null,"code":"import _slicedToArray from\"C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{getUser}from\"./service/AuthService\";import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var editUserUrl=\"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/edituser\";var Friends=function Friends(){var navigate=useNavigate();var _useState=useState(getUser()),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),connections=_useState4[0],setConnections=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),sent=_useState6[0],setSent=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),received=_useState8[0],setReceived=_useState8[1];useEffect(function(){if(!user){navigate(\"/login\");}else{var c=[];var s=[];var r=[];var f=user.friendList;console.log(user);for(var i=0;i<(f===null||f===void 0?void 0:f.length);i++){if(f[i].request===\"accepted\")c.push(f[i].name);else if(f[i].status===\"received\"&&f[i].request!==\"rejected\")r.push(f[i].name);else if(f[i].status===\"sent\"&&f[i].request!==\"rejected\")s.push(f[i].name);}setConnections(c);setReceived(r);setSent(s);}},[user]);var handleAccept=function handleAccept(sender){var requestBody={\"sender\":sender,\"receiver\":user.username,\"request\":\"accepted\"};axios.post(editUserUrl,requestBody).then(function(response){sessionStorage.setItem('scanResult',JSON.stringify(response.data));var data=response.data;var i;for(i=0;i<data.length;i++){if(data[i].username===user.username){sessionStorage.setItem('user',JSON.stringify(data[i]));break;}}setUser(data[i]);alert('Request Accepted');}).catch(function(error){if(error.response.status===401||error.response.status===403){alert(error.response.data.message);}else{alert('Backend server error');}});};var handleReject=function handleReject(sender){var requestBody={\"sender\":sender,\"receiver\":user.username,\"request\":\"rejected\"};axios.post(editUserUrl,requestBody).then(function(response){sessionStorage.setItem('scanResult',JSON.stringify(response.data));var data=response.data;var i;for(i=0;i<data.length;i++){if(data[i].username===user.username){sessionStorage.setItem('user',JSON.stringify(data[i]));break;}}setUser(data[i]);alert('Request Rejected');}).catch(function(error){if(error.response.status===401||error.response.status===403){alert(error.response.data.message);}else{alert('Backend server error');}});};if(user)return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:\"My Connections\"}),/*#__PURE__*/_jsx(\"ul\",{children:connections===null||connections===void 0?void 0:connections.map(function(fr){console.log(fr);return/*#__PURE__*/_jsx(\"li\",{children:fr},fr);})}),/*#__PURE__*/_jsx(\"div\",{children:\"Sent\"}),/*#__PURE__*/_jsx(\"ul\",{children:sent===null||sent===void 0?void 0:sent.map(function(fr){return/*#__PURE__*/_jsx(\"li\",{children:fr},fr);})}),/*#__PURE__*/_jsx(\"div\",{children:\"Received\"}),/*#__PURE__*/_jsx(\"ul\",{children:received===null||received===void 0?void 0:received.map(function(fr){return/*#__PURE__*/_jsxs(\"li\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"div\",{children:fr}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleAccept(fr);},children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleReject(fr);},children:\"Reject\"})]},fr);})})]});};export default Friends;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getUser","axios","editUserUrl","Friends","navigate","user","setUser","connections","setConnections","sent","setSent","received","setReceived","c","s","r","f","friendList","console","log","i","length","request","push","name","status","handleAccept","sender","requestBody","username","post","then","response","sessionStorage","setItem","JSON","stringify","data","alert","catch","error","message","handleReject","map","fr","display"],"sources":["C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/src/Friends.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getUser } from \"./service/AuthService\";\r\nimport axios from 'axios';\r\n\r\nconst editUserUrl = \"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/edituser\"\r\n\r\nconst Friends = () => {\r\n    const navigate = useNavigate();\r\n    const [user, setUser] = useState(getUser());\r\n    const [connections, setConnections] = useState([])\r\n    const [sent, setSent] = useState([])\r\n    const [received, setReceived] = useState([])\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigate(\"/login\")\r\n        } else {\r\n            let c = []\r\n            let s = []\r\n            let r = []\r\n            let f = user.friendList;\r\n            console.log(user);\r\n            for (let i = 0; i < f?.length; i++) {\r\n                if (f[i].request === \"accepted\") c.push(f[i].name)\r\n                else if (f[i].status === \"received\" && f[i].request !== \"rejected\") r.push(f[i].name)\r\n                else if (f[i].status === \"sent\" && f[i].request !== \"rejected\") s.push(f[i].name)\r\n            }\r\n            setConnections(c)\r\n            setReceived(r)\r\n            setSent(s)\r\n        }\r\n    }, [user])\r\n\r\n    const handleAccept = (sender) => {\r\n        const requestBody = {\r\n            \"sender\": sender,\r\n            \"receiver\": user.username,\r\n            \"request\": \"accepted\"\r\n        }\r\n        axios.post(editUserUrl, requestBody).then(response => {\r\n            sessionStorage.setItem('scanResult', JSON.stringify(response.data));\r\n            const data = response.data;\r\n            let i;\r\n            for (i = 0; i < data.length; i++) {\r\n                if (data[i].username === user.username) {\r\n                    sessionStorage.setItem('user', JSON.stringify(data[i]));\r\n                    break\r\n                }\r\n            }\r\n            setUser(data[i])\r\n            alert('Request Accepted');\r\n        }).catch(error => {\r\n            if (error.response.status === 401 || error.response.status === 403) {\r\n                alert(error.response.data.message);\r\n            } else {\r\n                alert('Backend server error');\r\n            }\r\n        })\r\n    }\r\n\r\n    const handleReject = (sender) => {\r\n        const requestBody = {\r\n            \"sender\": sender,\r\n            \"receiver\": user.username,\r\n            \"request\": \"rejected\"\r\n        }\r\n        axios.post(editUserUrl, requestBody).then(response => {\r\n            sessionStorage.setItem('scanResult', JSON.stringify(response.data));\r\n            const data = response.data;\r\n            let i;\r\n            for (i = 0; i < data.length; i++) {\r\n                if (data[i].username === user.username) {\r\n                    sessionStorage.setItem('user', JSON.stringify(data[i]));\r\n                    break\r\n                }\r\n            }\r\n            setUser(data[i])\r\n            alert('Request Rejected');\r\n        }).catch(error => {\r\n            if (error.response.status === 401 || error.response.status === 403) {\r\n                alert(error.response.data.message);\r\n            } else {\r\n                alert('Backend server error');\r\n            }\r\n        })\r\n    }\r\n\r\n    if (user)\r\n        return (\r\n            <div>\r\n                <div>My Connections</div>\r\n                <ul>\r\n                    {connections?.map((fr) => {\r\n                        console.log(fr);\r\n                        return <li key={fr}>{fr}</li>\r\n                    })}\r\n                </ul>\r\n                <div>Sent</div>\r\n                <ul>\r\n                    {sent?.map((fr) => {\r\n                        return <li key={fr}>{fr}</li>\r\n                    })}\r\n                </ul>\r\n                <div>Received</div>\r\n                <ul>\r\n                    {received?.map((fr) => {\r\n                        return <li key={fr} style={{ display: \"flex\" }}>\r\n                            <div>{fr}</div>\r\n                            <button onClick={() => handleAccept(fr)}>Accept</button>\r\n                            <button onClick={() => handleReject(fr)}>Reject</button>\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default Friends"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}