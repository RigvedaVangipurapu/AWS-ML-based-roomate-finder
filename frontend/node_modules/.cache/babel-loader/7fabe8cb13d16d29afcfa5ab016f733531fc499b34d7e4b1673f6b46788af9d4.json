{"ast":null,"code":"import _slicedToArray from\"C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{setUserSession}from'./service/AuthService';import{getUser}from'./service/AuthService';import axios from'axios';// const loginUrl = \"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/login\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginUrl=\"https://ao9v2ya7ci.execute-api.us-east-1.amazonaws.com/deploy/login\";var Login=function Login(props){var navigate=useNavigate();var user=getUser();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];//If user authenticated, redirect them\nuseEffect(function(){if(user){navigate(\"/\");}},[user]);// If user not authenticated, show them login form\nvar submitHandler=function submitHandler(event){event.preventDefault();if(username.trim()===''||password.trim()===''){setErrorMessage('All fields required');return;}setErrorMessage(null);var requestBody={username:username,password:password};axios.post(loginUrl,requestBody).then(function(response){console.log(response.data.scanResult);if(response.data.user.friendList===\"[]\")response.data.user.friendlist=[];setUserSession(response.data.user,response.data.token,response.data.scanResult);// props.history.push('/premium-content');\nnavigate('/');console.log(\"Logged in\");}).catch(function(error){// console.log(error)\nif(error.response.status===401||error.response.status===403){setErrorMessage(error.response.data.message);}else{setErrorMessage('Backend server error');}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{class:\"w-80\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h3\",{class:\"mb-30\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"w-50 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"username\",class:\"form-label\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter your username\",id:\"username\",type:\"text\",class:\"form-control\",required:true,value:username,onChange:function onChange(event){return setUsername(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{for:\"password\",class:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Enter your password\",id:\"password\",type:\"password\",class:\"form-control\",required:true,value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{class:\" btn btn-primary\",type:\"submit\",value:\"Login\"})]})]}),errorMessage&&/*#__PURE__*/_jsxs(\"p\",{class:\"message\",children:[\" \",errorMessage,\" \"]})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","setUserSession","getUser","axios","loginUrl","Login","props","navigate","user","username","setUsername","password","setPassword","errorMessage","setErrorMessage","submitHandler","event","preventDefault","trim","requestBody","post","then","response","console","log","data","scanResult","friendList","friendlist","token","catch","error","status","message","target","value"],"sources":["C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { setUserSession } from './service/AuthService';\nimport { getUser } from './service/AuthService'\nimport axios from 'axios';\n\n// const loginUrl = \"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/login\";\nconst loginUrl = \"https://ao9v2ya7ci.execute-api.us-east-1.amazonaws.com/deploy/login\"\n\nconst Login = (props) => {\n    const navigate = useNavigate();\n    const user = getUser();\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [errorMessage, setErrorMessage] = useState(null);\n\n    //If user authenticated, redirect them\n    useEffect(() => {\n        if (user) {\n            navigate(\"/\")\n        }\n    }, [user])\n\n    // If user not authenticated, show them login form\n    const submitHandler = (event) => {\n        event.preventDefault();\n        if (username.trim() === '' || password.trim() === '') {\n            setErrorMessage('All fields required');\n            return;\n        }\n\n        setErrorMessage(null);\n        const requestBody = {\n            username: username,\n            password: password\n        }\n        axios.post(loginUrl, requestBody).then((response) => {\n            console.log(response.data.scanResult);\n            if (response.data.user.friendList === \"[]\") response.data.user.friendlist = []\n            setUserSession(response.data.user, response.data.token, response.data.scanResult);\n            // props.history.push('/premium-content');\n            navigate('/');\n            console.log(\"Logged in\")\n        }).catch((error) => {\n            // console.log(error)\n            if (error.response.status === 401 || error.response.status === 403) {\n                setErrorMessage(error.response.data.message);\n            } else {\n                setErrorMessage('Backend server error');\n            }\n        })\n    }\n\n    return (\n        <div>\n            <form class=\"w-80\" onSubmit={submitHandler}>\n                <h3 class=\"mb-30\">Login</h3>\n\n                <div class=\"w-50 mb-3\">\n                    <label for=\"username\" class=\"form-label\">Username</label>\n                    <input placeholder=\"Enter your username\" id=\"username\" type=\"text\" class=\"form-control\" required value={username} onChange={event => setUsername(event.target.value)} /> <br />\n                    <label for=\"password\" class=\"form-label\">Password</label>\n                    <input placeholder=\"Enter your password\" id=\"password\" type=\"password\" class=\"form-control\" required value={password} onChange={event => setPassword(event.target.value)} /> <br />\n                    <input class=\" btn btn-primary\" type=\"submit\" value=\"Login\" />\n                </div>\n            </form>\n\n            {errorMessage && <p class=\"message\"> {errorMessage} </p>}\n        </div>\n    )\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}