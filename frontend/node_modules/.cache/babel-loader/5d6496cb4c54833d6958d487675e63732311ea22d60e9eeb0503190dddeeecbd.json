{"ast":null,"code":"import _slicedToArray from\"C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{getUser,resetUserSession,getUsers}from'./service/AuthService';import axios from'axios';// const editUserUrl = \"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/edituser\"\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var editUserUrl=\"https://ao9v2ya7ci.execute-api.us-east-1.amazonaws.com/deploy/edituser\";var Home=function Home(){var navigate=useNavigate();var user=getUser();var _useState=useState(getUsers()),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];// console.log(\"Users:\", users)\nvar _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),searchUser=_useState4[0],setUser=_useState4[1];var name=user!=='undefined'&&user?user.name:'';useEffect(function(){if(!user){navigate(\"/login\");}},[user]);var logoutHandler=function logoutHandler(){resetUserSession();navigate('/login');};var submitHandler=function submitHandler(event){event.preventDefault();if(searchUser.trim()===''){return;}};var handleClick=function handleClick(receiver){var requestBody={\"sender\":user.username,\"receiver\":receiver,\"request\":\"pending\"};axios.post(editUserUrl,requestBody).then(function(response){sessionStorage.setItem('scanResult',JSON.stringify(response.data));var data=response.data;for(var i=0;i<data.length;i++){if(data[i].username===user.username){sessionStorage.setItem('user',JSON.stringify(data[i]));break;}}setUsers(response.data);alert('Request sent succesfully');}).catch(function(error){if(error.response.status===401||error.response.status===403){alert(error.response.data.message);}else{alert('Backend server error');}});};var checkSent=function checkSent(friends){for(var i=0;i<friends.length;i++){if(friends[i].name===user.username&&friends[i].status===\"received\"){return true;}}return false;};var checkReceived=function checkReceived(friends){for(var i=0;i<friends.length;i++){if(friends[i].name===user.username&&friends[i].status===\"sent\"){return true;}}return false;};if(user){return/*#__PURE__*/_jsxs(\"div\",{children:[\"Hello \",name,\"! You have been logged in! \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[\"Search Users: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchUser,onChange:function onChange(event){return setUser(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Search\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:users.filter(function(u){var fr=user.friendList;var found=false;for(var i=0;i<fr.length;i++){if(fr[i].name===u.username&&(fr[i].request===\"accepted\"||fr[i].request===\"rejected\")){found=true;}}if(u.username===user.username){found=true;}if(!found)return u;}).map(function(receiver){return/*#__PURE__*/_jsxs(\"li\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"div\",{children:receiver.username}),checkSent(receiver.friendList)?/*#__PURE__*/_jsx(\"button\",{disabled:true,children:\"Sent\"}):checkReceived(receiver.friendList)?/*#__PURE__*/_jsx(\"button\",{disabled:true,children:\"Received Request\"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleClick(receiver.username);},children:\"Add Friend\"})]},receiver.username);})}),/*#__PURE__*/_jsx(\"input\",{type:\"button\",value:\"Logout\",onClick:logoutHandler})]});}};export default Home;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getUser","resetUserSession","getUsers","axios","editUserUrl","Home","navigate","user","users","setUsers","searchUser","setUser","name","logoutHandler","submitHandler","event","preventDefault","trim","handleClick","receiver","requestBody","username","post","then","response","sessionStorage","setItem","JSON","stringify","data","i","length","alert","catch","error","status","message","checkSent","friends","checkReceived","target","value","filter","u","fr","friendList","found","request","map","display"],"sources":["C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/src/Home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getUser, resetUserSession, getUsers } from './service/AuthService';\r\nimport axios from 'axios';\r\n\r\n// const editUserUrl = \"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/edituser\"\r\nconst editUserUrl = \"https://ao9v2ya7ci.execute-api.us-east-1.amazonaws.com/deploy/edituser\"\r\n\r\nconst Home = () => {\r\n    const navigate = useNavigate();\r\n    const user = getUser();\r\n    const [users, setUsers] = useState(getUsers())\r\n    // console.log(\"Users:\", users)\r\n    const [searchUser, setUser] = useState('');\r\n    const name = user !== 'undefined' && user ? user.name : '';\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            navigate(\"/login\")\r\n        }\r\n    }, [user])\r\n\r\n    const logoutHandler = () => {\r\n        resetUserSession();\r\n        navigate('/login');\r\n    }\r\n\r\n    const submitHandler = (event) => {\r\n        event.preventDefault();\r\n        if (searchUser.trim() === '') {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const handleClick = (receiver) => {\r\n        const requestBody = {\r\n            \"sender\": user.username,\r\n            \"receiver\": receiver,\r\n            \"request\": \"pending\"\r\n        }\r\n        axios.post(editUserUrl, requestBody).then(response => {\r\n            sessionStorage.setItem('scanResult', JSON.stringify(response.data));\r\n            const data = response.data;\r\n            for (let i = 0; i < data.length; i++) {\r\n                if (data[i].username === user.username) {\r\n                    sessionStorage.setItem('user', JSON.stringify(data[i]));\r\n                    break\r\n                }\r\n            }\r\n            setUsers(response.data)\r\n            alert('Request sent succesfully');\r\n        }).catch(error => {\r\n            if (error.response.status === 401 || error.response.status === 403) {\r\n                alert(error.response.data.message);\r\n            } else {\r\n                alert('Backend server error');\r\n            }\r\n        })\r\n    }\r\n\r\n    const checkSent = (friends) => {\r\n        for (let i = 0; i < friends.length; i++) {\r\n            if (friends[i].name === user.username && friends[i].status === \"received\") {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    const checkReceived = (friends) => {\r\n        for (let i = 0; i < friends.length; i++) {\r\n            if (friends[i].name === user.username && friends[i].status === \"sent\") {\r\n                return true\r\n            }\r\n        }\r\n        return false\r\n    }\r\n\r\n    if (user) {\r\n        return (\r\n            <div>\r\n                Hello {name}! You have been logged in! <br />\r\n\r\n                <form onSubmit={submitHandler}>\r\n                    Search Users: <input type=\"text\" value={searchUser} onChange={event => setUser(event.target.value)} />\r\n                    <input type=\"submit\" value=\"Search\" />\r\n                </form>\r\n                <ul>\r\n                    {users.filter((u) => {\r\n                        let fr = user.friendList;\r\n                        let found = false;\r\n                        for (let i = 0; i < fr.length; i++) {\r\n                            if (fr[i].name === u.username && (fr[i].request === \"accepted\" || fr[i].request === \"rejected\")) {\r\n                                found = true\r\n                            }\r\n                        }\r\n                        if (u.username === user.username) {\r\n                            found = true\r\n                        }\r\n                        if (!found) return u\r\n                    }).map((receiver) => {\r\n                        return <li key={receiver.username} style={{ display: \"flex\" }}>\r\n                            <div>\r\n                                {receiver.username}\r\n                            </div>\r\n                            {checkSent(receiver.friendList) ?\r\n                                <button disabled>Sent</button> :\r\n                                checkReceived(receiver.friendList) ?\r\n                                    <button disabled>Received Request</button> :\r\n                                    <button onClick={() => handleClick(receiver.username)}>Add Friend</button>\r\n\r\n                            }\r\n\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n                <input type=\"button\" value=\"Logout\" onClick={logoutHandler} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;"],"mappings":"oLAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,CAAEC,gBAAgB,CAAEC,QAAQ,KAAQ,uBAAuB,CAC3E,MAAOC,MAAK,KAAM,OAAO,CAEzB;AAAA,wFACA,GAAMC,YAAW,CAAG,wEAAwE,CAE5F,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACf,GAAMC,SAAQ,CAAGP,WAAW,EAAE,CAC9B,GAAMQ,KAAI,CAAGP,OAAO,EAAE,CACtB,cAA0BF,QAAQ,CAACI,QAAQ,EAAE,CAAC,wCAAvCM,KAAK,eAAEC,QAAQ,eACtB;AACA,eAA8BX,QAAQ,CAAC,EAAE,CAAC,yCAAnCY,UAAU,eAAEC,OAAO,eAC1B,GAAMC,KAAI,CAAGL,IAAI,GAAK,WAAW,EAAIA,IAAI,CAAGA,IAAI,CAACK,IAAI,CAAG,EAAE,CAE1Df,SAAS,CAAC,UAAM,CACZ,GAAI,CAACU,IAAI,CAAE,CACPD,QAAQ,CAAC,QAAQ,CAAC,CACtB,CACJ,CAAC,CAAE,CAACC,IAAI,CAAC,CAAC,CAEV,GAAMM,cAAa,CAAG,QAAhBA,cAAa,EAAS,CACxBZ,gBAAgB,EAAE,CAClBK,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,CAED,GAAMQ,cAAa,CAAG,QAAhBA,cAAa,CAAIC,KAAK,CAAK,CAC7BA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAIN,UAAU,CAACO,IAAI,EAAE,GAAK,EAAE,CAAE,CAC1B,OACJ,CACJ,CAAC,CAED,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,QAAQ,CAAK,CAC9B,GAAMC,YAAW,CAAG,CAChB,QAAQ,CAAEb,IAAI,CAACc,QAAQ,CACvB,UAAU,CAAEF,QAAQ,CACpB,SAAS,CAAE,SACf,CAAC,CACDhB,KAAK,CAACmB,IAAI,CAAClB,WAAW,CAAEgB,WAAW,CAAC,CAACG,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAClDC,cAAc,CAACC,OAAO,CAAC,YAAY,CAAEC,IAAI,CAACC,SAAS,CAACJ,QAAQ,CAACK,IAAI,CAAC,CAAC,CACnE,GAAMA,KAAI,CAAGL,QAAQ,CAACK,IAAI,CAC1B,IAAK,GAAIC,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGD,IAAI,CAACE,MAAM,CAAED,CAAC,EAAE,CAAE,CAClC,GAAID,IAAI,CAACC,CAAC,CAAC,CAACT,QAAQ,GAAKd,IAAI,CAACc,QAAQ,CAAE,CACpCI,cAAc,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACC,IAAI,CAACC,CAAC,CAAC,CAAC,CAAC,CACvD,MACJ,CACJ,CACArB,QAAQ,CAACe,QAAQ,CAACK,IAAI,CAAC,CACvBG,KAAK,CAAC,0BAA0B,CAAC,CACrC,CAAC,CAAC,CAACC,KAAK,CAAC,SAAAC,KAAK,CAAI,CACd,GAAIA,KAAK,CAACV,QAAQ,CAACW,MAAM,GAAK,GAAG,EAAID,KAAK,CAACV,QAAQ,CAACW,MAAM,GAAK,GAAG,CAAE,CAChEH,KAAK,CAACE,KAAK,CAACV,QAAQ,CAACK,IAAI,CAACO,OAAO,CAAC,CACtC,CAAC,IAAM,CACHJ,KAAK,CAAC,sBAAsB,CAAC,CACjC,CACJ,CAAC,CAAC,CACN,CAAC,CAED,GAAMK,UAAS,CAAG,QAAZA,UAAS,CAAIC,OAAO,CAAK,CAC3B,IAAK,GAAIR,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGQ,OAAO,CAACP,MAAM,CAAED,CAAC,EAAE,CAAE,CACrC,GAAIQ,OAAO,CAACR,CAAC,CAAC,CAAClB,IAAI,GAAKL,IAAI,CAACc,QAAQ,EAAIiB,OAAO,CAACR,CAAC,CAAC,CAACK,MAAM,GAAK,UAAU,CAAE,CACvE,MAAO,KAAI,CACf,CACJ,CACA,MAAO,MAAK,CAChB,CAAC,CAED,GAAMI,cAAa,CAAG,QAAhBA,cAAa,CAAID,OAAO,CAAK,CAC/B,IAAK,GAAIR,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGQ,OAAO,CAACP,MAAM,CAAED,CAAC,EAAE,CAAE,CACrC,GAAIQ,OAAO,CAACR,CAAC,CAAC,CAAClB,IAAI,GAAKL,IAAI,CAACc,QAAQ,EAAIiB,OAAO,CAACR,CAAC,CAAC,CAACK,MAAM,GAAK,MAAM,CAAE,CACnE,MAAO,KAAI,CACf,CACJ,CACA,MAAO,MAAK,CAChB,CAAC,CAED,GAAI5B,IAAI,CAAE,CACN,mBACI,gCACWK,IAAI,4CAA4B,aAAM,cAE7C,cAAM,QAAQ,CAAEE,aAAc,yCACZ,cAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAEJ,UAAW,CAAC,QAAQ,CAAE,kBAAAK,KAAK,QAAIJ,QAAO,CAACI,KAAK,CAACyB,MAAM,CAACC,KAAK,CAAC,EAAC,EAAG,cACtG,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,EAAG,GACnC,cACP,oBACKjC,KAAK,CAACkC,MAAM,CAAC,SAACC,CAAC,CAAK,CACjB,GAAIC,GAAE,CAAGrC,IAAI,CAACsC,UAAU,CACxB,GAAIC,MAAK,CAAG,KAAK,CACjB,IAAK,GAAIhB,EAAC,CAAG,CAAC,CAAEA,CAAC,CAAGc,EAAE,CAACb,MAAM,CAAED,CAAC,EAAE,CAAE,CAChC,GAAIc,EAAE,CAACd,CAAC,CAAC,CAAClB,IAAI,GAAK+B,CAAC,CAACtB,QAAQ,GAAKuB,EAAE,CAACd,CAAC,CAAC,CAACiB,OAAO,GAAK,UAAU,EAAIH,EAAE,CAACd,CAAC,CAAC,CAACiB,OAAO,GAAK,UAAU,CAAC,CAAE,CAC7FD,KAAK,CAAG,IAAI,CAChB,CACJ,CACA,GAAIH,CAAC,CAACtB,QAAQ,GAAKd,IAAI,CAACc,QAAQ,CAAE,CAC9ByB,KAAK,CAAG,IAAI,CAChB,CACA,GAAI,CAACA,KAAK,CAAE,MAAOH,EAAC,CACxB,CAAC,CAAC,CAACK,GAAG,CAAC,SAAC7B,QAAQ,CAAK,CACjB,mBAAO,YAA4B,KAAK,CAAE,CAAE8B,OAAO,CAAE,MAAO,CAAE,wBAC1D,qBACK9B,QAAQ,CAACE,QAAQ,EAChB,CACLgB,SAAS,CAAClB,QAAQ,CAAC0B,UAAU,CAAC,cAC3B,eAAQ,QAAQ,uBAAc,CAC9BN,aAAa,CAACpB,QAAQ,CAAC0B,UAAU,CAAC,cAC9B,eAAQ,QAAQ,mCAA0B,cAC1C,eAAQ,OAAO,CAAE,yBAAM3B,YAAW,CAACC,QAAQ,CAACE,QAAQ,CAAC,EAAC,wBAAoB,GARtEF,QAAQ,CAACE,QAAQ,CAY5B,CACT,CAAC,CAAC,EACD,cACL,cAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,OAAO,CAAER,aAAc,EAAG,GAC5D,CAEd,CACJ,CAAC,CAED,cAAeR,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}