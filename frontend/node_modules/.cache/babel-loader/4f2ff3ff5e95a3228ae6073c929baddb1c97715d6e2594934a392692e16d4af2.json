{"ast":null,"code":"import _slicedToArray from\"C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{setUserSession}from'./service/AuthService';import{getUser}from'./service/AuthService';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var loginUrl=\"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/login\";var Login=function Login(props){var navigate=useNavigate();var user=getUser();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];//If user authenticated, redirect them\nuseEffect(function(){if(user){navigate(\"/\");}},[user]);// If user not authenticated, show them login form\nvar submitHandler=function submitHandler(event){event.preventDefault();if(username.trim()===''||password.trim()===''){setErrorMessage('All fields required');return;}setErrorMessage(null);var requestBody={username:username,password:password};axios.post(loginUrl,requestBody).then(function(response){console.log(response.data.scanResult);setUserSession(response.data.user,response.data.token,response.data.scanResult);// props.history.push('/premium-content');\nnavigate('/');console.log(\"Logged in\");}).catch(function(error){// console.log(error)\nif(error.response.status===401||error.response.status===403){setErrorMessage(error.response.data.message);}else{setErrorMessage('Backend server error');}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Login\"}),\"username: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:function onChange(event){return setUsername(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\"password: \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\"})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:errorMessage})]});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","setUserSession","getUser","axios","loginUrl","Login","props","navigate","user","username","setUsername","password","setPassword","errorMessage","setErrorMessage","submitHandler","event","preventDefault","trim","requestBody","post","then","response","console","log","data","scanResult","token","catch","error","status","message","target","value"],"sources":["C:/Users/Ganesh/Desktop/AIO/Masters/NYU/Fall 2022/Cloud Computing/aws-roommate-finder/frontend/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { setUserSession } from './service/AuthService';\r\nimport { getUser } from './service/AuthService'\r\nimport axios from 'axios';\r\n\r\nconst loginUrl = \"https://lqjgcqa4lf.execute-api.us-east-1.amazonaws.com/prod/login\";\r\n\r\nconst Login = (props) => {\r\n    const navigate = useNavigate();\r\n    const user = getUser();\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState(null);\r\n\r\n    //If user authenticated, redirect them\r\n    useEffect(() => {\r\n        if (user) {\r\n            navigate(\"/\")\r\n        }\r\n    }, [user])\r\n\r\n    // If user not authenticated, show them login form\r\n    const submitHandler = (event) => {\r\n        event.preventDefault();\r\n        if (username.trim() === '' || password.trim() === '') {\r\n            setErrorMessage('All fields required');\r\n            return;\r\n        }\r\n\r\n        setErrorMessage(null);\r\n        const requestBody = {\r\n            username: username,\r\n            password: password\r\n        }\r\n        axios.post(loginUrl, requestBody).then((response) => {\r\n            console.log(response.data.scanResult);\r\n            setUserSession(response.data.user, response.data.token, response.data.scanResult);\r\n            // props.history.push('/premium-content');\r\n            navigate('/');\r\n            console.log(\"Logged in\")\r\n        }).catch((error) => {\r\n            // console.log(error)\r\n            if (error.response.status === 401 || error.response.status === 403) {\r\n                setErrorMessage(error.response.data.message);\r\n            } else {\r\n                setErrorMessage('Backend server error');\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={submitHandler}>\r\n                <h5>Login</h5>\r\n                username: <input type=\"text\" value={username} onChange={event => setUsername(event.target.value)} /> <br />\r\n                password: <input type=\"password\" value={password} onChange={event => setPassword(event.target.value)} /> <br />\r\n                <input type=\"submit\" value=\"Login\" />\r\n            </form>\r\n            {errorMessage && <p className='message'>{errorMessage}</p>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}